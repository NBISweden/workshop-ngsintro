{
  "hash": "2e867f13879d45b8885def2d6b0b01da",
  "result": {
    "markdown": "---\ntitle:  \"Admin resources\"\ndate: \"\"\ntoc: false\nnumber-sections: false\nsidebar: false\nformat: html\n---\n\n::: {.cell}\n\n:::\n\n\n::: {.alert .alert-primary}\nUseful utility commands/scripts and troubleshooting for course managers.\n:::\n\n# Status\n\nUseful commands for monitoring status and user activity on UPPMAX.\n\n## List jobs\n\nList all jobs running an a project\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```{.bash}\nsqueue -A snic2023-xx-xxxx | sort -k 4\n```\n:::\n:::\n\n\nSample output\n\n```\n  23186770      core _interac analopez  R    2:15:00      1 r55\n  23175660      core   (null)   anitav  R    6:52:28      1 r480\n  23188713      core   (null)    annha  R    1:42:59      1 r480\n  23185442      core   (null)    annha  R    2:47:11      1 r480\n  23185433      core   (null) inene424  R    2:47:42      1 r479\n  23185391      core   (null) inene424  R    2:50:04      1 r479\n  23185540      core   (null)  shengyz  R    2:46:20      1 r480\n     JOBID PARTITION     NAME     USER ST       TIME  NODES NODELIST(REASON)\n  23185119      core   (null)    wingf  R    2:53:40      1 r479\n```\n\n## Jobs per user\n\nSorted list of jobs per user\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```{.bash}\nsqueue -A snic2023-xx-xxxx | tr -s ' ' | cut -d' ' -f5 | sort | uniq -c | sort -k1\n```\n:::\n:::\n\n\nSample output\n\n```\n      1 tami\n      1 tommal\n      1 USER\n      1 valeriia\n      1 vioww\n      1 vishnupk\n      1 ylvafr\n      2 mehran96\n      2 miika\n      3 mariasve\n\n```\n\n## Core usage\n\nTotal number of cores used on a project\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```{.bash}\nsqueue -A snic2023-xx-xxxx -o %C | awk '{total += $0} END{print total}'\n```\n:::\n:::\n\n\n## Space usage\n\nAmount of storage space used per project\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```{.bash}\nuquota | grep snic2023-xx-xxxx\n```\n:::\n:::\n\n\nSample output\n\n```\nYour project     Your File Area         Unit       Usage  Quota Limit  Over Quota\n---------------  ---------------------  --------  ------  -----------  ----------\nsnic2022-22-123  /proj/snic2022-22-123  GBytes       4.6          128\n```\n\n## Reservation use\n\nList users by reservation ID\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```{.bash}\nsqueue -R snic2023-xx-xxxx_1 | sort -k 4\nsqueue -R snic2023-xx-xxxx_2 | sort -k 4\nsqueue -R snic2023-xx-xxxx_3 | sort -k 4\nsqueue -R snic2023-xx-xxxx_4 | sort -k 4\nsqueue -R snic2023-xx-xxxx_5 | sort -k 4\n```\n:::\n:::\n\n\nSample output\n\n```\n23188713      core   (null)    annha  R    2:01:15      1 r480\n23185442      core   (null)    annha  R    3:05:27      1 r480\n23187840      core   (null)   evangc  R    2:11:02      1 r479\n23186811      core   (null)  shengyz  R    2:34:45      1 r479\n23185540      core   (null)  shengyz  R    3:04:36      1 r480\n   JOBID PARTITION     NAME     USER ST       TIME  NODES NODELIST(REASON)\n23185119      core   (null)    wingf  R    3:11:56      1 r479\n\n```\n\n## User activity\n\nList last activity in a directory for all users\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```{.bash}\nbash /sw/courses/utils/list_modification_times.sh /proj/snic2023-xx-xxxx/nobackup/\n```\n:::\n:::\n\n\nSample output\n\n```\nhkyle           2021-11-22 13:59:59     (/proj/snic2021-22-644/nobackup/hkyle/uppmax_tutorial/job_template)\nmalinh          2021-11-22 14:12:10     (/proj/snic2021-22-644/nobackup/malinh/slurm-23182638.out)\naliraz          2021-11-22 14:23:16     (/proj/snic2021-22-644/nobackup/aliraz/slurm-23184022.out)\nkristaps        2021-11-22 14:25:08     (/proj/snic2021-22-644/nobackup/kristaps/uppmax_tutorial/jobData.sam)\nanapin          2021-11-22 14:56:14     (/proj/snic2021-22-644/nobackup/anapin/uppmax_tutorial/uppmax_tutorial/jobData.sam)\nanalopez        2021-11-22 14:56:16     (/proj/snic2021-22-644/nobackup/analopez/uppmax_tutorial/jobData.sam)\nprivate         Not available     ()\n```\n\n## List reservations for a project\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```{.bash}\nscontrol show res | grep snic2023-xx-xxxx\n```\n:::\n:::\n\n\nSample output\n\n```\nReservationName=snic2021-22-644_wed StartTime=2021-11-24T12:00:00 EndTime=2021-11-24T18:00:00 Duration=06:00:00\n   Users=(null) Accounts=snic2021-22-644 Licenses=(null) State=INACTIVE BurstBuffer=(null) Watts=n/a\nReservationName=snic2021-22-644_thu StartTime=2021-11-25T08:30:00 EndTime=2021-11-25T17:30:00 Duration=09:00:00\n   Users=(null) Accounts=snic2021-22-644 Licenses=(null) State=INACTIVE BurstBuffer=(null) Watts=n/a\nReservationName=snic2021-22-644_fri StartTime=2021-11-26T08:30:00 EndTime=2021-11-26T13:30:00 Duration=05:00:00\n   Users=(null) Accounts=snic2021-22-644 Licenses=(null) State=INACTIVE BurstBuffer=(null) Watts=n/a\n```\n\n## List project members\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n```{.bash}\nprojmembers snic2023-xx-xxxx\n```\n:::\n:::\n\n\nSample output\n\n```\nsnic2022-22-123 abusiddi   Abu Bakar Siddique\nsnic2022-22-123 afifac     Afifa Enam Chowdhury\nsnic2022-22-123 asve0014   Ashish Verma\nsnic2022-22-123 berka      Berkay Paylar\nsnic2022-22-123 btleren    Betül Eren Keskin\n```\n\n## User identity\n\nFetch user information from username\n\n```\nfinger username\n```\n\n# Troubleshooting\n\n## X-forwarding\n\n### Setup\n\n**Mac users**\n\n- Install Xquartz and restart computer\n- Open the Xquartz terminal and connect to Uppmax \n- In my recent macos (10.xxx) , x-forwarding only works if I explicitly run the Xquartz terminal\n\n`ssh -XY username@rackham.uppmax.uu.se`\n\nAlso use this when logging in to the compute node!\n\n`ssh -XY username@node`\n\n**Windows users**\n\nIn MobaXTerm, go to settings and make sure that X-forwarding is checked.\n\n### Testing X-forwarding\n\nType `xeyes` in the terminal.\n\n### Open .html documents on Rackham\n\nFirst ensure X-forwarding works, then run `firefox --no-remote filename.html`\n\n## Data transfer\n\n### SCP fails with *\n\nSometimes students have problems to download files with SCP when there is a `*` in the end of the line. For example; `scp user@rackham.uppmax.uu.se:/proj/bla/HG00097.bam* .`. It needs to be changed to `scp user@rackham.uppmax.uu.se:/proj/bla/HG00097.bam\\* .`.\n\n## Thinlinc\n\n### Login\n\nWhen logging in through an installed client, **username/password** seems to work. When logging in through the browser, **username/password+2FA** may be required.\n\n### Minimize the ThinLinc window\n\nOn a  Mac, press <kbd>Fn+F8</kbd>, then select: Minimize window. \n\n### Gedit opening issues\n\nWhen opening it from the terminal (`gedit &`), it was not able to connect to a display to show the graphics. The `DISPLAY` variable was empty. This was when using ThinLinc, so it should have worked. The issue was solved by opening gedit from the menu. Gedit could be labelled Text Editor. \n\n## Set persistent home directory in MobaXTerm\n\nThis is to specify where the **home directory** in MobaXTerm is located in the computer’s file system. In **Settings > Configuration**, set the persistent home directory to a suitable folder. Restart MobaXTerm. \n\n\n## Typing `$` on a Swedish keyboard\n\nPress <kbd>AltGr+4</kbd>.\n\n***\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}